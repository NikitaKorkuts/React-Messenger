"use strict";(self.webpackChunkmessanger=self.webpackChunkmessanger||[]).push([[316],{8313:function(e,a,s){s.d(a,{r:function(){return c}});var t,n=s(2791),r=["title","titleId"];function i(){return i=Object.assign?Object.assign.bind():function(e){for(var a=1;a<arguments.length;a++){var s=arguments[a];for(var t in s)Object.prototype.hasOwnProperty.call(s,t)&&(e[t]=s[t])}return e},i.apply(this,arguments)}function l(e,a){if(null==e)return{};var s,t,n=function(e,a){if(null==e)return{};var s,t,n={},r=Object.keys(e);for(t=0;t<r.length;t++)s=r[t],a.indexOf(s)>=0||(n[s]=e[s]);return n}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(t=0;t<r.length;t++)s=r[t],a.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function o(e,a){var s=e.title,o=e.titleId,c=l(e,r);return n.createElement("svg",i({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:a,"aria-labelledby":o},c),s?n.createElement("title",{id:o},s):null,t||(t=n.createElement("path",{d:"M0 12.116l2.053-1.897c2.401 1.162 3.924 2.045 6.622 3.969 5.073-5.757 8.426-8.678 14.657-12.555l.668 1.536c-5.139 4.484-8.902 9.479-14.321 19.198-3.343-3.936-5.574-6.446-9.679-10.251z"})))}var c=n.forwardRef(o);s.p},316:function(e,a,s){s.r(a),s.d(a,{default:function(){return x}});var t=s(2791),n=s(5671),r=s(3144),i=s(136),l=s(7277),o=s(6434),c=s(3636),g={dialogs:"dialogs_dialogs__CdenI",noDialogs:"dialogs_noDialogs__wfOgC",dialog:"dialogs_dialog__TICgF",dialogMain:"dialogs_dialogMain__qynC0",avatar:"dialogs_avatar__ySe5x",userInfo:"dialogs_userInfo__M5Vjf",userName:"dialogs_userName__azbkB",lastMessage:"dialogs_lastMessage__pXf6+",lastMessageBody:"dialogs_lastMessageBody__BctO5",lastMessageSender:"dialogs_lastMessageSender__lQAGd",isLastMessageViewed:"dialogs_isLastMessageViewed__sKgh+",viewed:"dialogs_viewed__bO7Ry",newMessagesCount:"dialogs_newMessagesCount__zNodd",lastDialogActivityDate:"dialogs_lastDialogActivityDate__sN7Lp"},d=s(3504),u=s(5236),f=s(4739),h=s(7696),v=function(e){var a=new Date,s=a.getDate()===e.getDate(),t=a.getMonth()===e.getMonth(),n=a.getFullYear()===e.getFullYear(),r=(0,f.L)(e),i=(0,h.F)(e);return s&&t&&n?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432 ".concat(r):a.getDate()===e.getDate()-1&&t&&n?"\u0412\u0447\u0435\u0440\u0430 \u0432 ".concat(r):n?"".concat(i," ").concat(r):"".concat(e.getFullYear()," \u0433. ").concat(i)},_=s(8313),m=s(184),M=function(e){var a,s,t=e.dialog,n=e.authUserId,r=(null===(a=t.lastMessage)||void 0===a?void 0:a.senderId)===n;return(0,m.jsxs)(d.rU,{to:"/dialog/"+t.id,className:g.dialog,children:[(0,m.jsxs)("div",{className:g.dialogMain,children:[function(){var e=t.photos.small;return(0,m.jsx)("img",{className:g.avatar,src:e||u,alt:"avatar"})}(),(0,m.jsxs)("div",{className:g.userInfo,children:[(0,m.jsx)("p",{className:g.userName,children:t.userName}),(0,m.jsx)("div",{className:g.lastMessage,children:(0,m.jsx)("p",{className:g.lastMessageBody,children:function(){var e=t.lastMessage;return t.hasNewMessages?"\u041d\u043e\u0432\u043e\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435":e?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(_.r,{className:"".concat(g.isLastMessageViewed," ").concat(e.viewed?g.viewed:"")}),e.senderName&&(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("span",{className:g.lastMessageSender,children:"".concat(r?"\u0412\u044b":e.senderName,": ")})}),t.lastMessage.body]}):"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"}()})})]}),t.hasNewMessages&&(0,m.jsx)("div",{className:g.newMessagesCount,children:t.newMessagesCount}),!(null!==(s=t.lastMessage)&&void 0!==s&&s.viewed)&&!t.hasNewMessages&&(0,m.jsx)("div",{className:g.notViewedMessage})]}),(0,m.jsx)("div",{className:g.lastDialogActivityDate,children:(0,m.jsx)("p",{children:v(t.lastDialogActivityDate)})})]})},p=function(e){var a=e.dialogs,s=e.authUserId;return(0,m.jsxs)("div",{className:g.dialogs,children:[a.map((function(e){return(0,m.jsx)(M,{dialog:e,authUserId:s},e.id)})),0===a.length&&(0,m.jsx)("span",{className:g.noDialogs,children:"\u041d\u0435\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432"})]})},w=function(e){(0,i.Z)(s,e);var a=(0,l.Z)(s);function s(){return(0,n.Z)(this,s),a.apply(this,arguments)}return(0,r.Z)(s,[{key:"componentDidMount",value:function(){(0,this.props.getDialogs)()}},{key:"componentDidUpdate",value:function(e){var a=this.props,s=a.getDialogs,t=a.newMessagesCount;e.newMessagesCount!==t&&s()}},{key:"render",value:function(){var e=this.props,a=e.dialogs,s=e.authUserId;return(0,m.jsx)(p,{dialogs:a,authUserId:s})}}]),s}(t.Component),j=(0,o.$j)((function(e){return{dialogs:e.dialogs.dialogs,authUserId:e.auth.userId,newMessagesCount:e.dialogs.newMessagesCount}}),{getDialogs:c.AB,getNewMessagesCount:c.CX})(w),x=function(){return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(j,{})})}},4739:function(e,a,s){s.d(a,{L:function(){return t}});var t=function(e){return"".concat(e.getHours(),":").concat((e.getMinutes()<10?"0":"")+e.getMinutes())}},7696:function(e,a,s){s.d(a,{F:function(){return t}});var t=function(e){var a=(new Date).getFullYear(),s=e.toLocaleString("default",{month:"short"}),t="".concat(e.getDate()," ").concat(s),n="".concat(e.getDate()," ").concat(s," ").concat(e.getFullYear());return a===e.getFullYear()?t:n}}}]);
//# sourceMappingURL=316.df80ca41.chunk.js.map