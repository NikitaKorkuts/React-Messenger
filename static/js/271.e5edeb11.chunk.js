"use strict";(self.webpackChunkmessanger=self.webpackChunkmessanger||[]).push([[271],{9271:function(e,s,r){r.r(s),r.d(s,{default:function(){return I}});var n=r(2791),t=r(1413),a=r(5671),i=r(3144),l=r(136),o=r(7277),u=r(6434),c=r(7781),f=r(8342),d=r(1928),g=r(4578),h=r(5236),m="pagination_pagination__e9Hgy",_="pagination_active__EI-Rh",v=r(184),p=function(e){var s=e.filter,r=e.totalItemsCount,n=e.currentPage,t=e.onPageChanged,a=e.pageSize,i=e.halfPaginationSize,l=void 0===i?4:i,o=Math.ceil(r/a),u=n-l;u<1&&(u=1);var c=n+l;c>o&&(c=o);var f=n-1;f<1&&(f=1);var d=n+1;d>o&&(d=n);for(var g=[],h=function(e){var r=(0,v.jsx)("span",{onClick:function(){return t(e,s)},className:e===n?_:void 0,children:e},e);g.push(r)},p=u;p<=c;p++)h(p);return(0,v.jsxs)("div",{className:"".concat(m),children:[(0,v.jsx)("span",{onClick:function(){return t(1,s)},children:"First"}),"\xa0",(0,v.jsx)("span",{onClick:function(){return t(f,s)},children:"\xab"}),g,(0,v.jsx)("span",{onClick:function(){return t(d,s)},children:"\xbb"}),"\xa0",(0,v.jsx)("span",{onClick:function(){return t(o,s)},children:"Last"})]})},j=r(3504),x={users:"user_users__d37Wh",user:"user_user__Rq5E8",actions:"user_actions__mWJdj",follow:"user_follow__Kb5h5",followBtn:"user_followBtn__6xzwv",startChatting:"user_startChatting__jZgD-",startChattingBtn:"user_startChattingBtn__0JhlK",mainPart:"user_mainPart__Mc3vr",leftSide:"user_leftSide__Ur7NI",userInfo:"user_userInfo__dDNif",infoName:"user_infoName__bpwYs",profileLink:"user_profileLink__GckpN",infoStatus:"user_infoStatus__9Cu8P",status:"user_status__GMYiA",isFollowing:"user_isFollowing__ax6JA",userAvatar:"user_userAvatar__baMz2",avatarImg:"user_avatarImg__e5aVY"},N=function(e){var s=e.imgUrl,r=e.name,n=e.isFriend,t=e.isFollowingInProgress,a=e.follow,i=e.id,l=e.unfollow,o=e.status,u=function(){a(i)},c=function(){l(i)};return(0,v.jsxs)("div",{className:x.user,children:[(0,v.jsxs)("div",{className:x.mainPart,children:[(0,v.jsxs)("div",{className:x.leftSide,children:[(0,v.jsx)("div",{className:x.userAvatar,children:(0,v.jsx)(j.rU,{to:"/profile/".concat(i),children:(0,v.jsx)("img",{className:x.avatarImg,alt:"UserAvatar",src:s})})}),(0,v.jsxs)("div",{className:x.userInfo,children:[(0,v.jsx)("div",{className:x.infoName,children:(0,v.jsx)(j.rU,{className:x.profileLink,to:"/profile/".concat(i),children:(0,v.jsx)("p",{children:r})})}),(0,v.jsx)("div",{className:x.infoStatus,children:(0,v.jsx)("p",{className:x.status,children:null===o||void 0===o?void 0:o.slice(0,20)})})]})]}),(0,v.jsx)("div",{className:x.isFollowing,children:function(){if(n)return(0,v.jsx)("span",{className:x.yourFriend,children:"\u2713 \u0412\u044b \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043d\u044b"})}()})]}),(0,v.jsxs)("div",{className:x.actions,children:[n?(0,v.jsx)("div",{className:x.follow,children:(0,v.jsx)("button",{disabled:t.some((function(e){return e===i})),onClick:c,className:x.followBtn,children:"\u041e\u0442\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})}):(0,v.jsx)("div",{className:x.follow,children:(0,v.jsx)("button",{disabled:t.some((function(e){return e===e})),onClick:u,className:x.followBtn,children:"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f"})}),(0,v.jsx)("div",{className:x.startChatting,children:(0,v.jsx)(j.rU,{to:"/dialog/".concat(i),children:(0,v.jsx)("button",{className:x.startChattingBtn,children:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435"})})})]})]})},S=r(5705),w=r(1958),C={usersSearch:"usersSearchForm_usersSearch__xOesh",searchIcon:"usersSearchForm_searchIcon__S9SDG",searchForm:"usersSearchForm_searchForm__T8WnQ",searchOptions:"usersSearchForm_searchOptions__CNr3a"},P=function(e){var s=e.onFilterChanged,r=e.filter,n=function(e,r){var n,t=r.setSubmitting;switch(e.friend){case"null":n=null;break;case"false":n=!1;break;case"true":n=!0}var a={term:e.term,friend:n};s(a),t(!1)};return(0,v.jsx)("div",{className:C.usersSearchForm,children:(0,v.jsx)(S.J9,{enableReinitialize:!0,initialValues:{term:r.term,friend:String(r.friend)},onSubmit:n,children:function(e){var s=e.isSubmitting,r=e.values,a=e.setSubmitting;return(0,v.jsxs)(S.l0,{className:C.usersSearch,children:[(0,v.jsx)(w.r,{className:C.searchIcon,onClick:s?function(){}:function(){return n(r,{setSubmitting:a})}}),(0,v.jsx)(S.gN,{placeholder:"\u0418\u0441\u043a\u0430\u0442\u044c...",className:C.searchForm,type:"",name:"term",autoFocus:!0}),(0,v.jsxs)(S.gN,{name:"friend",as:"select",className:C.searchOptions,onChange:function(e){!function(e,s){var r=s.isSubmitting,a=s.values,i=s.setSubmitting;e.persist(),r||n((0,t.Z)((0,t.Z)({},a),{},{friend:e.target.value}),{setSubmitting:i})}(e,{setSubmitting:a,isSubmitting:s,values:r})},children:[(0,v.jsx)("option",{className:C.searchOption,value:"null",children:"\u0412\u0441\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438"}),(0,v.jsx)("option",{className:C.searchOption,value:"true",children:"\u0421\u0440\u0435\u0434\u0438 \u043f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"}),(0,v.jsx)("option",{className:C.searchOption,value:"false",children:"\u041a\u0440\u043e\u043c\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u043e\u043a"})]})]})}})})},F=function(e){var s=e.users,r=e.requestUsers,n=e.filter,t=e.setCurrentPage,a=e.totalUsersCount,i=e.pageSize,l=e.currentPage,o=e.isFollowingInProgress,u=e.unfollow,c=e.follow,f=s.map((function(e){return(0,v.jsx)(N,{id:e.id,imgUrl:null!==e.photos.small?e.photos.small:h,name:e.name,isFriend:e.followed,isFollowingInProgress:o,unfollow:u,follow:c,status:e.status},e.id)}));return(0,v.jsxs)("div",{children:[(0,v.jsx)(P,{onFilterChanged:function(e){r(1,i,e)},filter:n}),a/i>1&&(0,v.jsx)(p,{totalItemsCount:a,currentPage:l,onPageChanged:function(e){t(e),r(e,i,n)},pageSize:i,filter:n}),(0,v.jsx)("div",{className:x.users,children:f})]})},b=function(e){(0,l.Z)(r,e);var s=(0,o.Z)(r);function r(){return(0,a.Z)(this,r),s.apply(this,arguments)}return(0,i.Z)(r,[{key:"componentDidMount",value:function(){var e=this.props,s=e.filter,r=e.currentPage,n=e.pageSize,a=e.router,i=e.requestUsers,l=new URLSearchParams(a.location.search),o=r,u=s;switch(l.get("page")&&(o=Number(l.get("page"))),l.get("term")&&(u=(0,t.Z)((0,t.Z)({},u),{},{term:l.get("term")})),l.get("friend")){case"null":u=(0,t.Z)((0,t.Z)({},u),{},{friend:null});break;case"false":u=(0,t.Z)((0,t.Z)({},u),{},{friend:!1});break;case"true":u=(0,t.Z)((0,t.Z)({},u),{},{friend:!0})}i(o,n,u)}},{key:"componentDidUpdate",value:function(e){var s=this.props,r=s.filter,n=s.currentPage,t=s.router;if(r!==e.filter||n!==e.currentPage){var a={};r.term&&(a.term=r.term),null!==r.friend&&(a.friend=String(r.friend)),1!==n&&(a.page=String(n));var i=new URLSearchParams(a).toString();t.navigate({search:"?"+i})}}},{key:"render",value:function(){var e=this.props,s=e.isFetching,r=e.users,n=e.totalUsersCount,t=e.currentPage,a=e.pageSize,i=e.filter,l=e.setCurrentPage,o=e.requestUsers,u=e.isFollowingInProgress,c=e.unfollow,d=e.follow;return s?(0,v.jsx)(f.p,{}):(0,v.jsx)(F,{users:r,totalUsersCount:n,currentPage:t,pageSize:a,filter:i,setCurrentPage:l,requestUsers:o,isFollowingInProgress:u,unfollow:c,follow:d})}}]),r}(n.Component),k=(0,c.qC)(d.E,(0,u.$j)((function(e){return{isFetching:e.users.isFetching,users:e.users.users,totalUsersCount:e.users.totalUsersCount,currentPage:e.users.currentPage,pageSize:e.users.pageSize,filter:e.users.filter,isFollowingInProgress:e.users.isFollowingInProgress}}),{requestUsers:g.D7,setCurrentPage:g._B.setCurrentPage,follow:g.ZN,unfollow:g.fv}))(b),I=function(){return(0,v.jsx)("div",{children:(0,v.jsx)(k,{})})}}}]);
//# sourceMappingURL=271.e5edeb11.chunk.js.map